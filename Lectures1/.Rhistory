options(htmltools.dir.version = FALSE)
ciclovias<-read_sf(here("Ciclovia/Ciclovia.shp"))
options(htmltools.dir.version = FALSE)
library(xaringanthemer)
library(xaringanExtra)
library(tidyverse)
library(knitr)
#library(icon)
library(nomnoml)
#library(countdown)
# xaringanExtra::use_logo(
#   image_url = "https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/xaringan.png"
# )
xaringanExtra::use_panelset()
xaringanExtra::use_broadcast()
xaringanExtra::use_share_again()
xaringanExtra::style_share_again(share_buttons = c("twitter", "linkedin"))
xaringanExtra::use_tachyons()
xaringanExtra::use_fit_screen()
xaringanExtra::use_tile_view() # O
style_mono_accent(
base_color = "#af2433",
background_color = "#ffffff",
inverse_background_color = "#af2433",
header_color = "#af2433",
inverse_header_color = "#ffffff",
inverse_text_color = "#ffffff",
code_inline_color = "#af2433",
link_color= "#af2433",
footnote_color =  "#af2433",
text_font_size = "30px",
header_font_google = google_font("Times", "Regular", "500"),
text_font_google   = google_font("Darker Grotesque", "500"),
code_font_google   = google_font("Fira Mono")
)
require(kableExtra,quietly=TRUE)
require(tidyverse,quietly=TRUE)
require(lubridate,quietly=TRUE)
require(plotly,quietly=TRUE)
require(scales,quietly=TRUE)
require("sf")
require("ggplot2")
require("tidyverse")
require("here")
bars<-st_read(here("egba/EGBa.shp"))
ggplot()+
geom_sf(data=bars) +
theme_bw() +
theme(axis.title =element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.text = element_text(size=6))
ciclovias<-read_sf(here("Ciclovia/Ciclovia.shp"))
ggplot()+
geom_sf(data=ciclovias) +
theme_bw() +
theme(axis.title =element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.text = element_text(size=6))
upla<-read_sf(here("upla/UPla.shp"))
ggplot()+
geom_sf(data=upla, aes(fill = UPlArea)) +
theme_bw() +
theme(axis.title =element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.text = element_text(size=6))
upla<-read_sf(here("upla/UPla.shp"))
ggplot()+
geom_sf(data=upla %>% filter(grepl("RIO",UPlNombre)==FALSE), fill = NA) +
geom_sf(data=ciclovias, col="red") +
geom_sf(data=bars) +
theme_bw() +
theme(axis.title =element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.text = element_text(size=6))
0.068/(2*0.001)
knitr::opts_chunk$set(echo = TRUE)
library(spatstat)
install.packages("spatstat")
require("spatstat")
data(japanesepines)
summary(japanesepines)
library(maptools)
require("rgeos")
install.packages("rgeos")
GIH<-data.frame(age=runif(30,18,80), income=rnorm(30,mean=12+0.06*age-0.001*age^2))
GIH<- GIH %>% mutate(income=rnorm(30,mean=12+0.06*age-0.001*age^2)))
GIH<-data.frame(age=runif(30,18,80),
age2=age^2)
GIH<-data.frame(age=runif(30,18,80)),
age2=age^2)
GIH<-data.frame(age=runif(30,18,80))
GIH<- GIH %>% mutate(age2=age^2,
income=rnorm(30,mean=12+0.06*age-0.001*age2)))
GIH<- GIH %>% mutate(age2=age^2,
income=rnorm(30,mean=12+0.06*age-0.001*age2))
reg_1<-lm(income~age+age2,GIH)
ggplot(GIH , mapping = aes(x = age , y = predict(reg_1))) +
geom_point(col = "red" , size = 0.5)
npoints(swedishpines)/area(Window(swedishpines))
unitname(swedishpines)
summary(swedishpines)
intensity(rescale(swedishpines))
(sdX <- sqrt(lam/area(Window(X))))
X <- rescale(swedishpines)
lam <- intensity(X)
(sdX <- sqrt(lam/area(Window(X))))
data(redwoodfull)
spred <- as(redwoodfull, "SpatialPoints")
data(cells)
spcells <- as(cells, "SpatialPoints")
dpp<-data.frame(rbind(coordinates(spjpines1), coordinates(spred),
coordinates(spcells)))
njap<-nrow(coordinates(spjpines1))
nred<-nrow(coordinates(spred))
ncells<-nrow(coordinates(spcells))
dpp<-cbind(dpp,c(rep("JAPANESE",njap), rep("REDWOOD", nred), rep("CELLS", ncells)))
names(dpp)<-c("x", "y", "DATASET")
###################################################
### code chunk number 12: sppa.Rnw:300-311
###################################################
data(redwoodfull)
spred <- as(redwoodfull, "SpatialPoints")
data(cells)
spcells <- as(cells, "SpatialPoints")
dpp<-data.frame(rbind(coordinates(spjpines1), coordinates(spred),
coordinates(spcells)))
###################################################
### code chunk number 10: sppa.Rnw:275-277
###################################################
spjpines1 <- elide(spjpines, scale=TRUE, unitsq=TRUE)
###################################################
### code chunk number 9: sppa.Rnw:261-263
###################################################
spjpines <- as(japanesepines, "SpatialPoints")
summary(spjpines)
###################################################
### code chunk number 10: sppa.Rnw:275-277
###################################################
spjpines1 <- elide(spjpines, scale=TRUE, unitsq=TRUE)
summary(spjpines1)
###################################################
### code chunk number 12: sppa.Rnw:300-311
###################################################
data(redwoodfull)
spred <- as(redwoodfull, "SpatialPoints")
data(cells)
spcells <- as(cells, "SpatialPoints")
dpp<-data.frame(rbind(coordinates(spjpines1), coordinates(spred),
coordinates(spcells)))
njap<-nrow(coordinates(spjpines1))
nred<-nrow(coordinates(spred))
ncells<-nrow(coordinates(spcells))
dpp<-cbind(dpp,c(rep("JAPANESE",njap), rep("REDWOOD", nred), rep("CELLS", ncells)))
names(dpp)<-c("x", "y", "DATASET")
###################################################
### code chunk number 13: sppa.Rnw:319-327
###################################################
library(lattice)
print(xyplot(y~x|DATASET, data=dpp, pch=19, aspect=1))
###################################################
### code chunk number 15: sppa.Rnw:401-406
###################################################
library(rgdal)
spasthma <- readOGR("spasthma.shp", "spasthma", stringsAsFactors=TRUE)
spbdry <- readOGR("spbdry.shp", "spbdry")
spsrc <- readOGR("spsrc.shp", "spsrc")
sproads <- readOGR("sproads.shp", "sproads")
###################################################
### code chunk number 17: sppa.Rnw:420-436
###################################################
plot(spbdry, axes=TRUE, lwd=0.5)
plot(sproads, add=TRUE, lwd=2, col="darkslategrey")
c_c <- (spasthma$Asthma == "case") + 1
plot(spasthma[c_c == 1,], add=TRUE, pch=4, cex=0.6, col="mediumaquamarine")
plot(spasthma[c_c == 2,], add=TRUE, pch=17, cex=0.75, col="goldenrod2")
plot(spsrc, pch=22, add=TRUE, cex=1.2, bg="brown4")
spasthma <- readOGR("spasthma.shp", "spasthma", stringsAsFactors=TRUE)
spbdry <- readOGR("spbdry.shp", "spbdry")
spasthma <- readOGR("sppa_bundle/spasthma.shp", "spasthma", stringsAsFactors=TRUE)
spbdry <- readOGR("sppa_bundle/spbdry.shp", "spbdry")
spsrc <- readOGR("sppa_bundle/spsrc.shp", "spsrc")
sproads <- readOGR("sppa_bundle/sproads.shp", "sproads")
###################################################
### code chunk number 17: sppa.Rnw:420-436
###################################################
plot(spbdry, axes=TRUE, lwd=0.5)
###################################################
### code chunk number 17: sppa.Rnw:420-436
###################################################
plot(spbdry, axes=TRUE, lwd=0.5)
plot(sproads, add=TRUE, lwd=2, col="darkslategrey")
c_c <- (spasthma$Asthma == "case") + 1
plot(spasthma[c_c == 1,], add=TRUE, pch=4, cex=0.6, col="mediumaquamarine")
plot(spasthma[c_c == 2,], add=TRUE, pch=17, cex=0.75, col="goldenrod2")
plot(spsrc, pch=22, add=TRUE, cex=1.2, bg="brown4")
legend("bottomright", legend=c("controls", "cases", "pollution sources"), pch=c(4, 17, 22), pt.cex=c(0.6, 0.75, 1.2), pt.bg=c(NA, NA, "brown4"), col=c("mediumaquamarine", "goldenrod2", "black"), bty="n")
rm(spasthma,spbdry,spsrc,sproads)
spasthma <- read_sf("sppa_bundle/spasthma.shp")
spbdry <- read_sf("sppa_bundle/spbdry.shp")
spsrc <- read_sf("sppa_bundle/spsrc.shp")
sproads <- read_sf("sppa_bundle/sproads.shp")
ggplot() +
geom_sf(spasthma)
?geom_sf
ggplot() +
geom_sf(data=spasthma)
ggplot() +
geom_sf(data=spasthma) +
geom_sf(data=spbdry) +
theme_map()
require("ggthemes")
ggplot() +
geom_sf(data=spasthma) +
geom_sf(data=spbdry) +
theme_map()
ggplot() +
geom_sf(data=spbdry) +
geom_sf(data=spasthma) +
theme_map()
ggplot() +
geom_sf(data=spbdry) +
geom_sf(data=spasthma) +
geom_sf(data=spsrc,col="red") +
theme_map()
ggplot() +
geom_sf(data=spbdry) +
geom_sf(data=spasthma) +
geom_sf(data=spsrc,col="red") +
geom_sf(data=sproads,col="blue") +
theme_map()
View(spbdry)
View(spasthma)
ggplot() +
geom_sf(data=spbdry) +
geom_sf(data=spasthma,aes(col=Asthma)) +
geom_sf(data=spsrc,col="red") +
geom_sf(data=sproads,col="blue") +
theme_map()
bars<-st_read(here("colegios_bogota.GeoJSON"))
require("geojsonsf")
colegios<-geojson_sf(here("colegios_bogota.GeoJSON"))
ggplot()+
geom_sf(data=colegios) +
theme_bw() +
theme(axis.title =element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.text = element_text(size=6))
require("geojsonsf")
colegios<-geojson_sf(here("colegios_bogota.GeoJSON"))
#colegios<-geojson_sf(here("colegios_bogota.GeoJSON"))
geo <- geojson_sf("C:/R/R-3.6.2/library/geojsonsf/examples/geo_melbourne.geojson")
colegios<-st_read(here("colegios_bogota.GeoJSON"))
#require("geojsonsf")
colegios<-st_read(here("colegios_bogota.json"))
require("leaflet")
require("leaflet")
m <- leaflet() %>% setView(lng = -74.066391,, lat = 4.601590, zoom = 12)
m %>% addTiles()
m %>% addProviderTiles(providers$USGS.USImageryTopo)
m %>% addProviderTiles(providers$Stamen.Toner)
m %>% addProviderTiles(providers$TomTom.Labels)
m %>% addProviderTiles(providers$Stamen.TopOSMRelief)
m %>% addProviderTiles(providers$Stamen.TopOSMRelief)
m %>% addProviderTiles(providers$OpenTopoMap)
leaflet(upla) %>%
addProviderTiles(providers$OpenTopoMap) %>%
addPolygons()
upla<-read_sf(here("upla/UPla.shp"))
ggplot()+
geom_sf(data=upla, aes(fill = UPlArea)) +
theme_bw() +
theme(axis.title =element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.text = element_text(size=6))
upla<-read_sf(here("upla/UPla.shp"))
View(upla)
colnames(upla)
leaflet(upla) %>%
addProviderTiles(providers$OpenTopoMap) %>%
addPolygons(popup = ~htmlEscape(UPlNombre))
leaflet(upla) %>%
addProviderTiles(providers$OpenTopoMap) %>%
addPolygons(label = UPlNombre)
leaflet(upla) %>%
addProviderTiles(providers$OpenTopoMap) %>%
addPolygons(label = upla$UPlNombre)
require("leaflet")
m <- leaflet() %>%
setView(lng = -74.066391, lat = 4.601590, zoom = 12)
m %>% addTiles()
m %>% addProviderTiles(providers$Stamen.Toner)
m %>% addProviderTiles(providers$OpenTopoMap)
```
m %>% addProviderTiles(providers$OpenTopoMap)
```
m %>% addProviderTiles(providers$OpenTopoMap)
```
m %>% addProviderTiles(providers$Stamen.Terrain)
```
m %>% addProviderTiles(providers$OpenTopoMap)
```
leaflet(upla) %>%
addProviderTiles(providers$OpenTopoMap) %>%
addPolygons()
upla<-read_sf(here("upla/UPla.shp"))
ggplot()+
geom_sf(data=upla, aes(fill = UPlArea)) +
theme_bw() +
theme(axis.title =element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.text = element_text(size=6))
m %>% addProviderTiles(providers$Stamen.Toner)
m %>% addProviderTiles(providers$OpenTopoMap)
```
leaflet(upla) %>%
addProviderTiles(providers$OpenTopoMap) %>%
addPolygons()
leaflet(upla) %>%
addProviderTiles(providers$OpenTopoMap) %>%
addPolygons(label = upla$UPlNombre)
